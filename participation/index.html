<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/assets/fonts/fonts.css"/>
<link rel="stylesheet" href="/assets/style.css"/>
<link rel="stylesheet" href="/assets/js/lity.min.css"/>


<link rel='shortcut icon' type='image/x-icon' href='/assets/img/icons/favicon.ico' />


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta property="og:site_name" content="OpenBioLink2021 Challenge" />
<meta 
    property="og:title"
    content="
        
            Participation
        
    " 
/>

<meta property="og:url" content="//participation/" />

    <meta property="og:type" content="article" />



    <meta property="fb:app_id" content="" />



<title>
    
        Participation
    
</title>
</head>
<body class="index">

    <header class="header">
	
	<!-- particles.js container -->
	<div id="particles-js" class="particles"></div>

	<!-- scripts -->
	<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
	<script>
	  particlesJS.load('particles-js', '/assets/particles.json', function() {
		console.log('particles.js loaded - callback');
	  });
	</script>
    <section class="logo">
        <a href="/" class="logo__link">
            
                <h1 style="display: none;">OpenBioLink2021 Challenge</h1>
                <img class="logo__link__img" src="/assets/img/logo2021-transp.png" />
            
        </a>
    </section>
    <button id="menuToggle">
        <div></div>
        <div></div>
        <div></div>
    </button>
    <nav class="menu">
        
<ul class="list primary">

    
        <li class="item">

            <div class="item-controls">
                <a href="/">
                
                    <img src="/assets/img/icons/goal.svg"/>
                
                
                    <p>Challenge</p>
                
                </a>

            
            </div>
            
        </li>   
    
        <li class="item">

            <div class="item-controls">
                <a href="/dataset">
                
                    <img src="/assets/img/icons/biomedicine.svg"/>
                
                
                    <p>Dataset</p>
                
                </a>

            
            </div>
            
        </li>   
    
        <li class="item">

            <div class="item-controls">
                <a href="/participation/">
                
                    <img src="/assets/img/icons/rocket.svg"/>
                
                
                    <p>Participation</p>
                
                </a>

            
            </div>
            
        </li>   
    
        <li class="item">

            <div class="item-controls">
                <a href="/rules/">
                
                    <img src="/assets/img/icons/guideline.svg"/>
                
                
                    <p>Rules</p>
                
                </a>

            
            </div>
            
        </li>   
    
        <li class="item">

            <div class="item-controls">
                <a href="/team/">
                
                    <img src="/assets/img/icons/team.svg"/>
                
                
                    <p>Team</p>
                
                </a>

            
            </div>
            
        </li>   
    
</ul>
    </nav>
</header>

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<main class="page">
    <h1 id="participation">Participation</h1>

<ol>
  <li><a href="https://forms.gle/nJZACsSN7RUQM7xM7">Register your Team</a></li>
  <li><a href="https://forms.gle/ucNpmMKVVUfgtGzj6">Make your submissions</a></li>
</ol>

<p>Please submit your approaches early, you can always overwrite your submission!</p>

<p>Your team name will be made publicly available in our leaderboards together with your model performance. For the awardees of each dataset, the team member information will be also made publicly available.</p>

<p>The code of all submissions have to be made public via a Github repository. It should include instructions on how to run the code (i.e. how to train a model, make hyperparameter search and evaluate it. Examples how we expect the repository to look like are our <a href="https://github.com/nomisto/openbiolink-2021-embedding-baseline">embedding baseline repository</a> and <a href="https://github.com/nomisto/openbiolink-2021-symbolic-baseline">symbolic baseline repository</a>.</p>

<h2 id="evaluation">Evaluation</h2>

<h3 id="protocol-and-metric">Protocol and metric</h3>

<p>All models are evaluated using the hits@10 metric, which is formally defined in the following (<a href="https://openreview.net/pdf?id=BkxSmlBFvr">Citation</a>). Let \(\mathcal{K}\) be the set of all triples within the dataset, \(\mathcal{K}^{\text{test}}\) be the set of test triples and \(\mathcal{E}\) be the set of entities in \(\mathcal{K}\). Given a triple \((h, r, t)\) of \(\mathcal{K}^{\text{test}}\), the rank of \((t \vert h,r)\) is the filtered rank of object \(t\), i.e. the rank of model score \(s(h,r,t)\) among the collection of all pseudo-negative-object scores</p>

\[\{s(h,r,t'): t' \in \mathcal{E} \:\text{and}\: (h,r,t') \notin \mathcal{K}\}\]

<p>Define rank of \((h \vert r,t)\) likewise. Then Hits@10 is calculated as:</p>

\[Hits@10 = \frac{1}{2* \vert \mathcal{\mathcal{K}^{\text{test}}} \vert} \sum_{(h,r,t) \in \mathcal{K}^{\text{test}}} \Big( 1(\text{rank}(t \vert h,r) \leq 10) + 1(\text{rank}(h \vert r,t) \leq 10 \Big)\]

<p>To avoid artificially boosting performances: The score of the positive triple \(s(h,r,t)\) must not be treated differently than the scores of pseudo-negative triples. Thus every approach should generate the ranking of entities according to the <em>random</em> or <em>ordinal</em> policy for dealing with same score entities. (For further information see page 4 in <a href="https://export.arxiv.org/pdf/2002.00819">Knowledge Graph Embedding for Link Prediction: A Comparative Analysis; Rossi et al</a>).</p>

<h3 id="evaluator-python-package">Evaluator (Python package)</h3>

<p>To evaluate a trained model for submission you have to use our provided evaluator <code class="language-plaintext highlighter-rouge">openbiolink.obl2021.OBL2021Evaluator</code>, which evaluates a models prediction in a standardized way. A detailed documentation of it can be found <a href="../obl2021.html#obl2021.OBL2021Evaluator">here</a>.</p>

<p>First you have to prepare:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">top10_heads</code>: torch.Tensor or numpy.array of shape (num_testing_triplets, 10)
    <ul>
      <li>Top 10 ranked predictions for the head entity. The value at (i,j) is the ID of the predicted head entity with rank <code class="language-plaintext highlighter-rouge">j+1</code> for the triple <code class="language-plaintext highlighter-rouge">dl.testing[i]</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">top10_tails</code>: torch.Tensor or numpy.array of shape (num_testing_triplets, 10)
    <ul>
      <li>Top 10 ranked predictions for the tail entity. The value at (i,j) is the ID of the predicted tail entity with rank <code class="language-plaintext highlighter-rouge">j+1</code> for the triple <code class="language-plaintext highlighter-rouge">dl.testing[i]</code></li>
    </ul>
  </li>
</ul>

<p>You can then run the evaluation by calling the evaluators <code class="language-plaintext highlighter-rouge">eval(...)</code> function with <code class="language-plaintext highlighter-rouge">top10_heads</code>, <code class="language-plaintext highlighter-rouge">top10_tails</code> and the set of test triples which can be retrieved from the Dataset module <code class="language-plaintext highlighter-rouge">dl.testing</code>. The <code class="language-plaintext highlighter-rouge">eval(...)</code> function creates a submission file in the location the script is started from and displays the calculated hits@10 metric which you also have to submit.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">openbiolink.obl2021</span> <span class="kn">import</span> <span class="n">OBL2021Dataset</span><span class="p">,</span> <span class="n">OBL2021Evaluator</span>
<span class="n">dl</span> <span class="o">=</span> <span class="n">OBL2021Dataset</span><span class="p">()</span>
<span class="n">ev</span> <span class="o">=</span> <span class="n">OBL2021Evaluator</span><span class="p">()</span>
<span class="n">ev</span><span class="p">.</span><span class="nb">eval</span><span class="p">(</span><span class="n">top10_heads</span><span class="p">,</span> <span class="n">top10_tails</span><span class="p">,</span> <span class="n">dl</span><span class="p">.</span><span class="n">testing</span><span class="p">)</span></code></pre></figure>

<h2 id="minimal-working-example">Minimal working example</h2>

<p>Following code produces the score and the file needed for submission. The file is generated in the location from where the script is started. For the submission you need to copy and paste the line that starts with <code class="language-plaintext highlighter-rouge">{'h10': ...</code> to the submission form.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="s">"""
Import of the OpenBioLink Dataset and Evaluator.
"""</span>
<span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">from</span> <span class="nn">openbiolink.obl2021</span> <span class="kn">import</span> <span class="n">OBL2021Dataset</span><span class="p">,</span> <span class="n">OBL2021Evaluator</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">default_rng</span>

<span class="k">class</span> <span class="nc">MockupModel</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">rng</span> <span class="o">=</span> <span class="n">default_rng</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getTop10Heads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">):</span>
        <span class="n">rand</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">.</span><span class="n">rng</span><span class="p">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">180992</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">batch</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="k">return</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">rand</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getTop10Tails</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">):</span>
        <span class="n">rand</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">.</span><span class="n">rng</span><span class="p">.</span><span class="n">choice</span><span class="p">(</span><span class="mi">180992</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">batch</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="k">return</span> <span class="n">torch</span><span class="p">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">rand</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Mockup Model
</span>    <span class="n">model</span> <span class="o">=</span> <span class="n">MockupModel</span><span class="p">()</span>

    <span class="c1"># Initialize dataset and evaluator
</span>    <span class="n">dl</span> <span class="o">=</span> <span class="n">OBL2021Dataset</span><span class="p">()</span>
    <span class="n">ev</span> <span class="o">=</span> <span class="n">OBL2021Evaluator</span><span class="p">()</span>

    <span class="n">top10_heads</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">top10_tails</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">n_batches</span><span class="p">,</span> <span class="n">batches</span> <span class="o">=</span> <span class="n">dl</span><span class="p">.</span><span class="n">get_test_batches</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">batches</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">n_batches</span><span class="p">):</span>
        <span class="n">top10_tails</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="n">getTop10Heads</span><span class="p">(</span><span class="n">batch</span><span class="p">))</span>
        <span class="n">top10_heads</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="n">getTop10Tails</span><span class="p">(</span><span class="n">batch</span><span class="p">))</span>
    <span class="n">top10_heads</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">cat</span><span class="p">(</span><span class="n">top10_heads</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">top10_tails</span> <span class="o">=</span> <span class="n">torch</span><span class="p">.</span><span class="n">cat</span><span class="p">(</span><span class="n">top10_tails</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">ev</span><span class="p">.</span><span class="nb">eval</span><span class="p">(</span><span class="n">top10_heads</span><span class="p">,</span> <span class="n">top10_tails</span><span class="p">,</span> <span class="n">dl</span><span class="p">.</span><span class="n">testing</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></code></pre></figure>

<p>Above code should result in the following output:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Dataset not found, downloading to C:/Users/MyUser/Desktop/obl2021 ...
KGID_HQ_DIR.zip: 45.2MB <span class="o">[</span>00:06, 7.47MB/s]                            
100%|██████████| 1810/1810 <span class="o">[</span>00:05&lt;00:00, 311.50it/s]
Submission file saved here: C:/Users/MyUser/Desktop/pred_OBL2021.npz
Please copy the following line <span class="k">in </span>the respective field of the submission form:
<span class="o">{</span><span class="s1">'h10'</span>: 4.697066833614372e-05<span class="o">}</span></code></pre></figure>


</main>

    
    <footer class="footer">
        <section class="footer__about">
                <p class="footer__about__copyright">This work received funding from <a id="simplex-logo" href="https://www.netidee.at" target="_blank"><img alt="Netidee logo" src="/assets/img/logo-netidee.svg"/></a> <span class="divider">·</span> <a href="/attributions.html">Icon attributions</a></p>
                
                <span class="divider">·</span>
                
                <span class="footer__about__theme"><p>theme</p><a id="simplex-logo" href="https://github.com/andreondra/jekyll-theme-simplex" target="_blank"><img alt="Simplex theme logo" src="/assets/img/icons/simplex_logo.svg"/></a><p>by <a href="https://ondrej.golasowski.com/">golas</a></p></span>
        </section>
</footer>
    
    <script src="/assets/js/jquery.slim.min.js"></script>
<script src="/assets/js/lity.min.js"></script>
<script src="/assets/js/tools.js"></script>
</body>
</html>